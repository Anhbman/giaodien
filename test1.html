
		
		
			
			

















	
		
			​​​​​​
            CHƯƠNG 3 :SẢN XUẤT GIÁ TRỊ THẶNG DƯ TRONG NỀN KINH TẾ THỊ TRƯỜNG
            
            I. LÝ LUẬN CỦA C.MÁC VỀ GIÁ TRỊ THẶNG DƯ
            
            1. Nguồn gốc của giá trị thặng dư
            
            a. Công thức chung của tư bản
            
            - Theo C.Mác, quan hệ lưu thông hàng hóa giản đơn vận động theo công thức H-T-H. 
            
            - Lưu thông hàng hóa thị trường tư bản chủ nghĩa vận động theo công thức T-H-T.
            
            => C.Mác phát hiện ra công thức chung của tư bản phải là T-H-T’. Trong đó, trong đó T’= T + ∆t trong đó ∆t phải là một số dương
            
            b. Hàng hóa sức lao động 
            
            _ C.Mác viết: “Sức lao động hay năng lực lao động là toàn bộ những năng lực thể chất và tinh thần tồn tại trong cơ thể, trong một con người đang sống, và được người đó đem ra vận dụng mỗi khi sản xuất ra một giá trị sử dụng nào đó”
            
            _ Có hai điều kiện để sức lao động trở thành hàng hóa:
            
            ● Người lao động được tự do về thân thể
            
            ● Người lao động không có đủ các tư liệu sản xuất cần thiết để tự kết hợp với sức lao động của mình tạo ra hàng hóa để bán, cho nên họ phải bán sức lao động. 
            
            _ Nó cũng có hai thuộc tính như hàng hóa thông thường là thuộc tính giá trị và thuộc tính giá trị sử dụng. 
            
            + Giá trị của hàng hóa sức lao động cũng do thời gian lao động xã hội cần thiết để sản xuất và tái sản xuất ra sức lao động quyết định. Giá trị của hàng hóa sức lao động được đo lường gián tiếp thông qua lượng giá trị của các tư liệu sinh hoạt để tái sản xuất ra sức lao động. Cấu thành giá trị của hàng hóa sức lao động gồm:
            
            - Giá trị tư liệu sinh hoạt cần thiết (cả vật chất, tinh thần) để tái sản xuất ra sức lđ
            
            - Phí tổn đào tạo người lao động;
            
            - Giá trị những tư liệu sinh hoạt cần thiết (vật chất và tinh thần) nuôi con của người lao động. 
            
            + Giá trị sử dụng của hàng hóa sức lao động có tính năng đặc biệt mà không hàng hóa thông thường nào có được, đó là trong khi sử dụng nó, không những giá trị của nó được bảo tồn mà còn tạo ra được lượng giá trị lớn hơn.
            
            à C.Mác khẳng định, giá trị thặng dư ấy, do hao phí sức lao động mà có.
            
            c. Ví dụ về sự sản xuất giá trị thặng dư
            
            - Người lao động chỉ phải hao phí một phần thời gian lao động (trong thời gian lao động đã được thỏa thuận mua bán theo nguyên tắc ngang giá) là có thể bù đắp được giá trị hàng hóa sức lao động, C.Mác gọi bộ phận này là thời gian lao động tất yếu.
            
            - Ngoài thời gian tất yếu đó, vẫn trong nguyên tắc ngang giá đã thoả thuận, là thời gian lao động thặng dư và hao phí lao động trong khỏang thời gian này sẽ tạo ra được giá trị thặng dư.
            
            Ví dụ:
            
            Giả sử sản xuất giá trị thặng dư được thực hiện dưới hình thái sản xuất cụ thể là sản xuất sợi. Để tiến hành sản xuất sợi, nhà tư bản phải ứng ra số tiền là 50 USD để mua 50 kg bông, 3 USD hao mòn máy móc để kéo 50 kg bông thành sợi, 15 USD mua hàng hoá sức lao động để sử dụng trong 1 ngày làm việc 8 giờ. Như vậy, nhà tư bản ứng ra 68 USD. Trong quá trình sản xuất sợi, bằng lao động cụ thể, người công nhân biến bông thành sợi, theo đó giá trị của bông và hao mòn máy móc được chuyển vào giá trị của sợi; bằng lao động trừu tượng người công nhân tạo ra giá trị mới, giả định, trong 4 giờ lao động công nhân đã chuyển toàn bộ 50 kg bông thành sợi. Giá trị sợi gồm:
            
                        Giá trị 50 kg bông chuyển vào :                  50 USD 
            
                        Hao mòn máy móc:                           3 USD 
            
                        Giá trị mới bằng giá trị sức lao động: 15 USD 
            
                        Tổng cộng:                                                     68 USD 
            
            Nhà tư bản ứng ra 68 USD, bán sợi thu về 68 USD. Nếu quá trình lao động dừng lại tại điểm này thì không có giá trị thặng dư, tiền ứng ra chưa trở thành tư bản. Do đó, để có giá trị thặng dư, thời gian lao động phải vượt quá cái điểm bù lại giá trị sức lao động. Nhà tư bản mua sức lao động của công nhân để sử dụng trong 8 giờ chứ không phải 4 giờ. Công nhân phải tiếp tục làm việc trong 4 giờ nữa, nhà tư bản chỉ phải tốn thêm 50 USD để mua 50 kg bông và 3 USD hao mòn máy móc. Quá trình lao động 4 giờ sau diễn ra như quá trình đầu. Số sợi được tạo ra trong 4 giờ lao động sau cũng có giá trị 68 USD. Tổng cộng, nhà tư bản ứng ra 100 USD + 6 USD + 15 USD = 121 USD, trong khi đó số sợi sản xuất ra có giá trị 136 USD. Do đó, nhà tư bản thu được lượng giá trị thặng dư là 136 USD – 121 USD = 15 USD. 
            
            * Giá trị thặng dư ký hiệu là m.
            
            d. Tư bản bất biến và tư bản khả biến
            
            - Bộ phận tư bản tồn tại dưới hình thái tư liệu sản xuất mà giá trị được lao động cụ thể của công nhân làm thuê bảo tồn và chuyển nguyên vẹn vào giá trị sản phẩm, tức là giá trị không biến đổi trong quá trình sản xuất được C.Mác gọi là tư bản bất biến (ký hiệu là c).
            
            + Tư bản bất biến không tạo ra giá trị thặng dư nhưng là điều kiện cần thiết để cho quá trình tạo ra giá trị thặng dư được diễn ra.
            
            - Bộ phận tư bản tồn tại dưới hình thái sức lao động không tái hiện ra, nhưng thông qua lao động trừu tượng của công nhân mà tăng lên, tức biến đổi về số lượng trong quá trình sản xuất, được Mác gọi là tư bản khả biến (ký hiệu là v).
            
            ·         G là giá trị hàng hóa thì công thức hóa về giá trị hàng hóa: G = c + (v+m)
            
                        + (v+m) là giá trị mới của hàng hóa
            
                        + c là giá trị của những tư liệu sản xuất đã được tiêu dùng, là bộ phận lao động quá khứ đã được kết tinh trong máy móc, nguyên nhiên vật liệu. Bộ phận này được lao động sống chuyển vào giá trị sản phẩm mới. 
            
            - Tiền công chính là giá cả của hàng hóa sức lao động
            
            - Để thu được giá trị thặng dư dưới hình thái tiền (thực hiện giá trị thặng dư) thì hàng hóa phải được thị trường chấp nhận.
            
            e. Tư bản cố định và tư bản lưu động
            
            § Tuần hoàn của tư bản
            
            - Tuần hoàn của tư bản là sự vận động của tư bản lần lượt trải qua ba giai đoạn dưới ba hình thái kế tiếp nhau (tư bản tiền tệ, tư bản sản xuất, tư bản hàng hóa) gắn với thực hiện những chức năng tương ứng (chuẩn bị các điều kiện cần thiết để sản xuất giá trị thặng dư, sản xuất giá trị thặng dư, thực hiện giá trị tư bản và giá trị thặng dư) và quay trở về hình thái ban đầu cùng với giá trị thặng dư. 
            
            à Nguồn gốc của giá trị thặng dư được tạo ra trong sản xuất và do hao phí sức lao động của người lao động chứ không phải do mua rẻ bán đắt mà có. 
            
            - Kết quả của quá trình sản xuất là H’, trong giá trị của H’ có bao hàm giá trị thặng dư. Khi bán được H’ người ta thu được T’. Trong T’ có giá trị thặng dư dưới hình thái tiền.  
            
            § Chu chuyển của tư bản
            
            _ Chu chuyển tư bản là tuần hoàn tư bản được xét là quá trình định kỳ, thường xuyên lặp đi lặp lại và đổi mới theo thời gian, được đo lường bằng thời gian chu chuyển hoặc tốc độ chu chuyển tư bản. 
            
            + Thời gian chu chuyển tư bản là khoảng thời gian mà một tư bản kể từ khi được ứng ra dưới một hình thái nhất định cho đến khi quay trở về dưới hình thái đó cùng với giá trị thặng dư. Thời gian chu chuyển tư bản gồm thời gian sản xuất và thời gian lưu thông. 
            
            + Tốc độ chu chuyển tư bản là số lần mà một tư bản được ứng ra dưới một hình thái nhất định quay trở về dưới hình thái đó cùng với giá trị thặng dư tính trong một đơn vị thời gian nhất định (thông thường trong thời gian 1 năm). 
            
            Δ Tốc độ chu chuyển của từng bộ phận tư bản được tính như sau:    n=CH/ch
            
                                
            
            Trong đó                      n: số vòng chu chuyển của tư bản,  
            
            CH: thời gian của một năm
            
            ch:  thời gian một vòng chu chuyển 
            
            § Sự phân chia tư bản cố định và tư bản lưu động
            
            * Xét theo phương thức chu chuyển giá trị của tư bản sản xuất vào giá trị sản phẩm, tư bản được chia thành các bộ phận là tư bản cố định và tư bản lưu động.
            
            - Tư bản cố định (ký hiệu c1) là bộ phận tư bản sản xuất tồn tại dưới hình thái tư liệu lao động tham gia toàn bộ vào quá trình sản xuất nhưng giá trị của nó chỉ chuyển dần dần, từng phần vào giá trị sản phẩm theo mức độ hao mòn.
            
            - Tư bản lưu động (ký hiệu c2)  là bộ phận tư bản sản xuất tồn tại dưới hình thái sức lao động, nguyên nhiên vật liệu, vật liệu phụ, giá trị của nó được chuyển một lần, toàn phần vào giá trị sản phẩm khi kết thúc từng quá trình sản xuất. 
            
            à Để thu được hiệu quả sản xuất kinh doanh cao, các nhà tư bản phải nỗ lực rút ngắn thời gian chu chuyển hay đẩy nhanh tốc độ chu chuyển tư bản trên cơ sở nắm vững các yếu tố ảnh hưởng đến thời gian chu chuyển tư bản, đồng thời sử dụng hiệu quả tư bản cố định và tư bản lưu động.
            
            2. Tỷ suất giá trị thặng dư và khối lượng giá trị thặng dư
            
            _ Tỷ suất giá trị thặng dư là tỷ lệ phần trăm giữa giá trị thặng dư và tư bản khả biến.
            
                                                           m'=(m/v)100%       
            
            ·         Trong đó: m’ là tỷ suất giá trị thăng dư; m là giá trị thặng dư; v là tư bản khả biến.
            
            _ Tỷ suất giá trị thặng dư cũng có thể tính theo tỷ lệ phần trăm giữa thời gian lao động thặng dư (t’) và thời gian lao động tất yếu (t).
            
                                                    m'=(t'/t).100%
            
            _ Khối lượng giá trị thặng dư là lượng giá trị thặng dư bằng tiền mà nhà tư bản thu được. Công thức tính khối lượng giá trị thặng dư là: M = m’. V
            
            3. Các phương pháp sản xuất giá trị thặng dư trong nền kinh tế thị trường tư bản chủ nghĩa
            
            a. Sản xuất giá trị thặng dư tuyệt đối
            
            _ Giá trị thặng dư tuyệt đối là giá trị thặng dư thu được do kéo dài ngày lao động vượt quá thời gian lao động tất yếu, trong khi năng suất lao động, giá trị sức lao động và thời gian lao động tất yếu không thay đổi.
            
            Ví dụ: nếu ngày lao động là 8 giờ, thời gian lao động tất yếu là 4 giờ, thời gian lao động thặng dư là 4 giờ, tỷ suất giá trị thặng dư là 100%.
            
            Giả định nhà tư bản kéo dài ngày lao động thêm 2 giờ nữa với mọi điều kiện không đổi thì giá trị thặng dư tuyệt đối tăng từ 4 giờ lên 6 giờ và tỷ suất giá trị thặng dư sẽ là
            
            
                                m'=(6 giờ/4 giờ).100%=150%
            Để có nhiều giá trị thặng dư, người mua hàng hóa sức lao động phải tìm mọi cách để kéo dài ngày lao động và tăng cường độ lao động. Song ngày lao động chịu giới hạn về mặt sinh lý (công nhân phải có thời gian ăn, ngủ, nghỉ ngơi, giải trí) nên không thể kéo dài bằng ngày tự nhiên, còn cường độ lao động cũng không thể tăng vô hạn quá sức chịu đựng của con người. Hơn nữa, công nhân kiến quyết đấu tranh đòi rút ngắn ngày lao động. Quyền lợi hai bên có mâu thuẫn, thông qua đấu tranh, tuỳ tương quan lực lượng mà tại các dân tộc trong từng giai đoạn lịch sử cụ thể có thể quy định độ dài nhất định của ngày lao động. Tuy vậy, ngày lao động phải dài hơn thời gian lao động tất yếu và cũng không thể vượt giới hạn thể chất và tinh thần của người lao động.
            
            b. Sản xuất giá trị thặng dư tương đối 
            
            _ Giá trị thặng dư tương đối là giá trị thặng dư thu được nhờ rút ngắn thời gian lao động tất yếu; do đó kéo dài thời gian lao động thặng dư trong khi độ dài ngày lao động không thay đổi hoặc thậm chí rút ngắn.
            
            Ví dụ: ngày lao động 8 giờ, với 4 giờ lao động tất yếu, 4 giờ lao động thặng dư, tỷ suất giá trị thặng dư là 100%. Nếu giá trị sức lao động giảm khiến thời gian lao động tất yếu rút xuống còn 2 giờ thì thời gian lao động thặng dư sẽ là 6 giờ. Khi đó:
            
                         m'=(6 giờ/2 giờ).100%= 300% 
            Nếu ngày lao động giảm xuống còn 6 giờ nhưng giá trị sức lao động giảm khiến thời gian lao động tất yếu rút xuống còn 1 giờ thì thời gian lao động thặng dư sẽ là 5 giờ. Khi đó:
                                   m'=(5 giờ/1 giờ).100%= 500%
            
            Để hạ thấp giá trị sức lao động thì phải làm giảm giá trị các tư liệu sinh hoạt và dịch vụ cần thiết để tái sản xuất sức lao động, do đó phải tăng năng suất lao động trong các ngành sản xuất ra tư liệu sinh hoạt và các ngành sản xuất ra tư liệu sản xuất để chế tạo ra tư liệu sinh hoạt đó.
            
              
            
            _ Thực tế, việc cải tiến kỹ thuật, tăng năng suất lao động diễn ra trước hết ở một hoặc vài xí nghiệp riêng biệt, làm cho hàng hoá do các xí nghiệp ấy sản xuất ra có giá trị cá biệt thấp hơn giá trị xã hội, và do đó, sẽ thu được một số giá trị thặng dư vượt trội so với các xí nghiệp khác. Phần giá trị thặng dư trội hơn đó là giá trị thặng dư siêu ngạch.
            
            _ Xét từng trường hợp, giá trị thặng dư siêu ngạch là một hiện tượng tạm thời, xuất hiện rồi mất đi, nhưng xét toàn bộ xã hội tư bản thì giá trị thặng dư siêu ngạch lại là hiện tượng tồn tại thường xuyên.
            
            à Giá trị thặng dư siêu ngạch là hình thái biến tướng của giá trị thặng dư tương đối.
            
            II. TÍCH LŨY TƯ BẢN
            
            1. Bản chất của tích lũy tư bản
            
            - Trong thực tế nền kinh tế thị trường, tích luỹ tư bản là quá trình tái sản xuất tư bản.
            
            - Tái sản xuất giản đơn tư bản chủ nghĩa là sự lặp lại quá trình sản xuất với quy mô như cũ, tức là toàn bộ giá trị thặng dư đã được nhà tư bản tiêu dùng cho cá nhân. 
            
            - Tái sản xuất mở rộng tư bản chủ nghĩa là sự lặp lại quá trình sản xuất với quy mô và trình độ ngày càng tăng lên. Để thực hiện tái sản xuất mở rộng, nhà tư bản phải biến một bộ phận giá trị thặng dư thành tư bản phụ thêm, do đó tích lũy tư bản là tư bản hóa giá trị thặng dư. 
            
            2. Những nhân tố góp phần làm tăng quy mô tích luỹ
            
            - Nâng cao tỷ suất giá trị thặng dư. 
            
            - Nâng cao năng suất lao động. 
            
            - Sử dụng hiệu quả máy móc.
            
            - Đại lượng tư bản ứng trước tư bản ứng trước càng lớn à ↑ quy mô tích luỹ.  
            
            3. Một số quy luật của tích luỹ tư bản
            
             a. Tích lũy tư bản làm tăng cấu tạo hữu cơ tư bản.
            
            Cấu tạo hữu cơ của tư bản (ký hiệu c/v) là cấu tạo giá trị được quyết định bởi cấu tạo kỹ thuật và phản ánh sự biến đổi của cấu tạo kỹ thuật của tư bản. 
            
            b. Tích luỹ tư bản làm tăng tích tụ và tập trung tư bản.
            
            + Tích tụ tư bản làm tăng quy mô tư bản cá biệt đồng thời làm tăng quy mô tư bản xã hội do giá trị thặng dư được biến thành tư bản phụ thêm.
            
            + Tập trung tư bản là sự tăng lên của quy mô tư bản cá biệt mà không làm tăng quy mô tư bản xã hội do hợp nhất các tư bản cá biệt vào một chỉnh thể tạo thành một tư bản cá biệt lớn hơn. Tập trung tư bản có thể được thực hiện thông qua sáp nhập các tư bản cá biệt với nhau.
            
            c. Quá trình tích luỹ tư bản làm không ngừng làm tăng chênh lệch giữa thu nhập của nhà tư bản với thu nhập của người lao động làm thuê cả tuyệt đối lẫn tương đối. 
            
            + Bần cùng hoá tương đối là cùng với đà tăng trưởng lực lượng sản xuất, phần sản phẩm phân phối cho giai cấp công nhân làm thuê tuy có tăng tuyệt đối, nhưng lại giảm tương đối so với phần dành cho giai cấp tư sản.
            
            + Bần cùng hoá tuyệt đối thể hiện sự sụt giảm tuyệt đối về mức sống của giai cấp công nhân làm thuê.
            
             
            
            Đừng nghĩ nó quá phức tạp, hãy nghĩ nó đơn giản thôi thì mọi chuyện sẽ đơn giản.
            
             
            
            III. CÁC HÌNH THỨC BIỂU HIỆN CỦA GIÁ TRỊ THẶNG DƯ TRONG NỀN KINH TẾ THỊ TRƯỜNG
            
            1.a.  Chí phí sản xuất
            
            Ví dụ: Để sản xuất hàng hóa nhà tư bản phải đầu tư khối lượng tư bản có giá trị là 1.000.000 USD, được chia thành các phần:
            
            Tư bản cố định: 500.000 USD với thời gian chu chuyển 10 năm, nghĩa là mỗi năm sẽ khấu hao 50.000 USD, phần này sẽ được tính vào giá trị hàng hóa của năm;
            
            Tư bản lưu động bất biến: 400.000 USD với thời gian chu chuyển 1 năm;
            
            Tư bản khả biến: 100.000 USD với thời gian chu chuyển 1 năm;
            
            Tỷ suất giá trị thặng dư: 100%
            
            Thì giá trị hàng hóa được tạo ra trong một năm là:
            
            450.000c + 100.000v + 100.000m = 650.000
            
            Nếu trong giá trị 650.000 USD trừ đi 100.000 USD là giá trị thặng dư thì chỉ còn lại 550.000 USD. Phần này được gọi là chi phí sản xuất. 
            
            à Vậy Phần giá trị ấy của hàng hóa, bù lại giá cả của những tư liệu sản xuất đã tiêu dùng và giá cả của sức lao động đã được sử dụng, - chỉ bù lại số chi phí mà bản thân nhà tư bản đã bỏ ra để sản xuất hàng hóa; đối với hắn, phần giá trị ấy của hàng hóa là chi phí sản xuất của hàng hóa“.
             
            
             
            
            _ Chi phí sản xuất được ký hiệu là k. CT: k = c+v. Khi xuất hiện phạm trù chí phí sản xuất thì giá trị hàng hóa G = c + (v+m) sẽ biểu hiện thành: G = k + m. 
            
            _ Chi phí sản xuất có vai trò quan trọng: bù đắp tư bản về giá trị và hiện vật, đảm bảo điều kiện cho tái sản xuất trong kinh tế thị trường; tạo cơ sở cho cạnh tranh, là căn cứ quan trọng cho cạnh tranh về giá cả bán hàng giữa các nhà tư bản.
            
            1.b.  Lợi nhuận và tỷ suất lợi nhuận
            
            § Lợi nhuận (Ký hiệu là p)
            
            _ Giữa giá trị hàng hóa và chi phí sản xuất có một khoảng chênh lệch, cho nên sau khi bán hàng hóa (bán ngang giá), nhà tư bản không những bù đắp đủ số chi phí đã ứng ra mà còn thu được số tiền lời bằng giá trị thặng dư. Số tiền này C.Mác gọi là lợi nhuận. 
            
            _ Khi đó giá trị hàng hóa được viết là: G = k + p à p = G - k.
            
            _ C.Mác khái quát: giá trị thặng dư, được quan niệm là con đẻ của toàn bộ tư bản ứng trước, mang hình thái chuyển hóa là lợi nhuận. Điều đó có nghĩa, lợi nhuận chẳng qua chỉ là hình thái biểu hiện của giá trị thặng dư trên bề mặt nền kinh tế thị trường.
            
            _ Bán hàng hóa thấp hơn giá trị và cao hơn chi phí sản xuất cũng có thể đã có lợi nhuận. Trong trường hợp này, lợi nhuận nhỏ hơn giá trị thặng dư.
            
            _ Tuy nhiên, lợi nhuận khi được đo bằng số tuyệt đối chỉ phản ánh quy mô của hiệu quả kinh doanh mà chưa phản ánh rõ mức độ hiệu quả của kinh doanh, do đó cần được bổ sung bằng số đo tương đối là tỷ suất lợi nhuận.
            
            § Tỷ suất lợi nhuận (ký hiệu là p’)
            
             _ Tỷ suất lợi nhuận là tỷ lệ % giữa lợi nhuận và toàn bộ giá trị của tư bản ứng trước. Tỷ suất lợi nhuận có thể được tính theo công thức:                          p'=p/(c+v).100%
            
              
            
            _ Tỷ suất lợi nhuận phản ánh mức doanh lợi đầu tư tư bản và thường được tính hàng năm
            
            _ So với lợi nhuận thì tỷ suất lợi nhuận phản ánh đầy đủ hơn mức độ hiệu quả kinh doanh
            
            à Tỷ suất lợi nhuận trở thành động cơ quan trọng nhất của hoạt động cạnh tranh tư bản chủ nghĩa.
            
            § Các nhân tố ảnh hưởng tới tỷ suất lợi nhuận (p’)
            
              
            
                                 p'=m/(c+v).100%=(m/v)/(c/v+1)=m'/(c/v+1)
            
            _ Tỷ suất giá trị thặng dư (m’). P’ tỷ lệ thuận với m’
            
            _ Cấu tạo hữu cơ tư bản (c/v). P’ tỷ lệ nghịch với cấu tạo hữu cơ của tư bản (c/v)
            
             _ Tốc độ chu chuyển của tư bản. Nếu tốc độ chu chuyển của tư bản càng lớn thì tỷ lệ giá trị thặng dư hàng năm tăng lên. Do đó, tỷ suất lợi nhuận tăng 
            
             _ Tiết kiệm tư bản bất biến. Trong điều kiện tư bản khả biến không đổi, nếu giá trị thặng dư giữ nguyên, tiết kiệm tư bản bất biến làm tăng tỷ suất lợi nhuận. 
            
            1.c.  Lợi nhuận bình quân 
            
            § Sự hình thành tỷ suất lợi nhuận bình và lợi nhuận bình quân
            
            Giả sử có ba ngành sản xuất  (cơ khí, dệt và da), vốn của các ngành đều bằng nhau (bằng 100 đơn vị tiền tệ), tỷ suất giá trị thặng dư đều bằng nhau (bằng 100%), tốc độ chu chuyển của vốn ở các ngành đều bằng nhau. Nhưng do đặc điểm của mỗi ngành sản xuất khác nhau, nên cấu tạo hữu cơ của vốn (tư bản) ở từng ngành khác nhau, do đó tỷ suất lợi nhuận ở các ngành khác nhau (xem bảng).
            
            
                
            
            Ở đây, tỷ suất lợi nhuận ở ngành da là cao nhất, nên các doanh nghiệp ở ngành cơ khí (thậm trí cả ở ngành dệt) sẽ di chuyển vốn của mình sang đầu tư vào ngành da. Đến một lúc nào đó sản phẩm của ngành da sẽ tăng lên (cung lớn hơn cầu), làm cho giá cả hàng hoá ở ngành da sẽ hạ xuống thấp hơn giá trị của nó và tỷ suất lợi nhuận ở ngành này giảm xuống. Ngược lại, sản phẩm của ngành cơ khí sẽ giảm đi (cung nhỏ hơn cầu), nên giá cả sẽ cao hơn giá trị và do đó tỷ suất lợi nhuận ở ngành cơ khí sẽ tăng lên. Nếu tỷ suất lợi nhuận ở ngành cơ khí cao hơn ngành da thì các doanh nghiệp lại chuyển vốn đầu tư vào ngành cơ khí. Đây gọi là hiện tượng tự do di chuyển vốn sản xuất kinh doanh. Sự tự do di chuyển vốn vào các ngành chỉ tạm dừng lại khi tỷ suất lợi nhuận ở tất cả các ngành đều xấp xỉ bằng nhau, tức là hình thành tỷ suất lợi nhuận bình quân  . 
            
            _ Về cách tính, lợi nhuận bình quân (ký hiệu là    ) được tính theo tỷ suất lợi nhuận bình quân (là con số trung bình của các tỷ suất lợi nhuận, ký hiệu là   ). 
            
            _ Tỷ suất lợi nhuận bình quân được tính bằng số bình quân gia quyền của các tỷ suất lợi nhuận như sau:
            
            
              
            
            _ Trong nền kinh tế thị trường cạnh tranh giữa các ngành tất yếu dẫn tới hình thành lợi nhuận bình quân. Lợi nhuận bình quân là lợi nhuận thu được theo tỷ suất lợi nhuận bình quân (ký hiệu là    ). Nếu ký hiệu giá trị tư bản ứng trước là K thì lợi nhuận bình quân được tính như sau:   =p   x  K
            
            _ Khi lợi nhuận bình quân trở thành quy luật phổ biến chi phối các hoạt động kinh doanh trong nền kinh tế thị trường thì giá trị của hàng hóa chuyển hóa thành giá cả sản xuất. Giá cả sản xuất là giá cả mang lại lợi nhuận bình quân. Nếu ký hiệu giá cả sản xuất là GCSX thì giá cả sản xuất được tính như sau:  GCSX = k +p
            
            _ Những điều kiện hình thành tỷ suất lợi nhuận bình quân, lợi nhuận bình quân, giá cả sản xuất bao gồm: tư bản tự do di chuyển và sức lao động tự do di chuyển. Trong nền kinh tế thị trường tư bản chủ nghĩa, lợi nhuận bình quân đã trở thành căn cứ cho các doanh nghiệp lựa chọn ngành nghề, phương án kinh doanh sao cho có hiệu quả nhất.  
            
            § Lợi nhuận thương nghiệp
            
            _  Lợi nhuận thương nghiệp là một sự chênh lệch giữa giá bán và giá mua hàng hóa. 
            
            _ Nguồn gốc của lợi nhuận thương nghiệp chính là một phần của giá trị thặng dư mà nhà tư bản sản xuất trả cho nhà tư bản thương nghiệp do nhà tư bản thương nghiệp đã giúp cho việc tiêu thụ hàng hóa.
            
            2. Lợi tức
            
            _ Lợi tức là một phần của lợi nhuận bình quân mà người đi vay phải trả cho người cho vay vì đã sử dụng lượng tiền nhàn rỗi của người cho vay.
            
            _ Song về thực chất, lợi tức đó là một phần của giá trị thặng dư mà người đi vay đã thu được thông qua sử dụng tiền vay đó.
            
            _ Tư bản cho vay trong chủ nghĩa tư bản có đặc điểm:
            
            + Thứ nhất, quyền sử dụng tách khỏi quyền sở hữu.
            
            + Thứ hai, là hàng hóa đặc biệt.
            
            - Người bán không mất quyền sở hữu, người mua chỉ được quyền sử dụng trong một thời gian. 
            
            - Sau khi sử dụng, tư bản cho vay không mất giá trị sử dụng và giá trị mà được bảo tồn, thậm chí còn tăng thêm. 
            
            - Giá cả của tư bản cho vay được quyết định bởi giá trị sử dụng của nó là khả năng thu được lợi nhuận bình quân, do đó không những không được quyết định bởi giá trị, mà còn thấp hơn nhiều so với giá trị
            
            + Thứ ba, là hình thái tư bản phiến diện nhất song được sùng bái nhất. Tư bản cho vay vận động theo công thức T – T’, tạo ra ảo tưởng là tiền đẻ ra tiền, che dấu quan hệ bóc lột vì không phản ánh rõ nguồn gốc của lợi tức cho vay.
            
            ● Tỷ suất lợi tức là tỷ lệ phần trăm giữa lợi tức và tư bản cho vay. Nếu ký hiệu tỷ suất lợi tức là z’, tư bản cho vay là TBCV, thì công thức tính tỷ suất lợi tức như sau:
                                          Z'=(Z/TBCV).100%
            
              
            
            Δ Tỷ suất lợi tức chịu ảnh hưởng của các nhân tố chủ yếu là tỷ suất lợi nhuận bình quân và tình hình cung cầu về tư bản cho vay. 
            
            c. Địa tô tư bản chủ nghĩa
            
            _ Địa tô là phần giá trị thặng dư còn lại sau khi đã khấu trừ đi phần lợi nhuận bình quân mà các nhà tư bản kinh doanh trên lĩnh vực nông nghiệp phải trả cho địa chủ. 
            
            _ Các hình thức địa tô như: 
            
            - Địa tô chênh lệch. Trong đó, địa tô chênh lệch I là địa tô mà địa chủ thu được do chỗ cho thuê ruộng đất tốt và độ màu mỡ cao, điều kiện tự nhiên thuận lợi. Địa tô chênh lệch II là địa tô mà địa chủ thu được do chỗ cho thuê mảnh đất đã được đầu tư, thâm canh và làm tăng độ màu mỡ của đất
            
            - Địa tô tuyệt đối. Là địa tô mà địa chủ thu được trên mảnh đất cho thuê, không kể độ màu mỡ tự nhiên thuận lợi hay do thâm canh. Đó là phần lợi nhuận siêu ngạch dôi ra ngoài lợi nhuận bình quân được tính bằng số chênh lệch giữa giá trị nông sản và giá cả sản xuất chung của nông sản. 
            
            C.Mác ký hiệu địa tô là R.
            
              
                                     Giá cả đất đai=Địa tô/Tỷ suất lợi tức nhận gửi của ngân hàng
                    
                
            
            
            var PREFIX_PRATICE_READING = 'ex-';
            function onLoadedTopicContentPanel() {
                $('.topic-content-find-media-element').find('.main-video-wrapper').removeClass('spining');
                var elements = $('.topic-content-find-media-element').find('[id*=' + PREFIX_PRATICE_READING + ']');
                $.each(elements, function(index, elem){
                    updateStateButtonLoading(elem, 'success');
                });
                const is_diction_mode = false;
                if(setDictionaryMode && is_diction_mode){
                    setDictionaryMode('main-content');
                } 
            }
            jQuery(document).ready(function ($) {
                console.log('navigator.userAgent', navigator.userAgent, navigator);
                const topicId = 6143894756524032;
                const courseId = 5873171332857856;
                var elements = $('.topic-content-find-media-element').find('[id*=' + PREFIX_PRATICE_READING + ']');
                /* if(elements.length > 0){
                    importJsUrls('/loxolivestream/loxolivestream.nocache.js');
                } */
                elements.addClass('buttonLoading');
                $.each(elements, function(index, elem){
                    updateStateButtonLoading(elem, 'loading');
                    $(elem).click(function(){
                        if(typeof preparePractice === 'function'){
                            console.log($(elem).attr('id'), topicId, courseId);
                            preparePractice($(elem).attr('id'), topicId, courseId);
                        }
                    });
                });
                var iframes = $('.topic-content-find-media-element').find('iframe');
                $.each(iframes, function(index, iframe){
                    iframe.setAttribute('webkitallowfullscreen', '');
                    iframe.setAttribute('mozallowfullscreen', '');
                    iframe.setAttribute('allowfullscreen', '');
                    var src = iframe.getAttribute('src');
                    if(checkIframeVideo(src)){
                        var parentElement = $('<div class="main-video-wrapper add-loading-icon spining"></div>');
                        parentElement.insertBefore(iframe);
                        parentElement.append(iframe);
                    } else {
                        var heightDefault = $(iframe).attr('height');
                        if(heightDefault && heightDefault.endsWith('%')){
                            $(iframe).height(parseInt(heightDefault.replace('%', '')) * $(window).height() / 100 - 70+'px');
                        }
                        if(false){
                            var jfr = $(iframe);
                            ifr.addClass('iframe-on-apple-device');
                            ifr.click(function(){
                                window.open(src);
                            });
                        }
            // 			var parentElement = $('<div class="main-document-wrapper"></div>');
            // 			parentElement.insertBefore(iframe);
            // 	        parentElement.append(iframe);
                    }
                });
                var audios = $('.topic-content-find-media-element').find('audio');
                $.each(audios, function(index, audio){
                    audio.setAttribute("controlslist", "nodownload");
                });
                
                
                
                $('.setting-text-content').bind('copy paste cut drag drop', function (e) {
                    e.preventDefault();
                });
                
                var liveStreamModule = '/resources/css/video-js.css?v=5.968';
                $.getScript(liveStreamModule, function(data, textStatus, jqxhr) {
                    let videoWrapper = $('.video-panel-video-js');
                    if(videoWrapper !== undefined){
                        videoWrapper.removeClass('loading');
                    }
                });
            });
            function checkIframeVideo(src){
                return src.indexOf('vimeo.com') > -1 || src.indexOf('facebook.com') > -1 || src.indexOf('youtu.be') > -1 || src.indexOf('youtube.com') > -1;
            }
            function onLoadedIframe(iframe) {
                var src = iframe.getAttribute('src');
                iframe.setAttribute('webkitallowfullscreen', '');
                iframe.setAttribute('mozallowfullscreen', '');
                iframe.setAttribute('allowfullscreen', '');
                if(src && src.indexOf('http') > -1 && (src.indexOf('.html') > -1 || src.indexOf('.htm') > -1)){
                    iframe.removeAttribute('onload');
                    var newParentIframe = document.createElement('div');
                    /* iframe.classList.add('scale-iframe'); */
                    iframe.parentElement.replaceChild(newParentIframe, iframe);
                    newParentIframe.appendChild(iframe)	
                    var widthScreen = $(".setting-text-content").width() *1.2 - 4;
                    if(widthScreen == 0){
                        widthScreen = 400;
                    }
                    var ratioScale = widthScreen/1024;
                    if (ratioScale > 0.95) {
                        ratioScale = 0.95;
                    }
                    if (ratioScale <= 0) {
                        ratioScale = 0.3;
                    }
                    iframe.setAttribute("style", "-moz-transform: scale(" + ratioScale + ");" + 
                            "    -moz-transform-origin: 0 0;" + 
                            "    -o-transform: scale(" + ratioScale + ");" + 
                            "    -o-transform-origin: 0 0;" + 
                            "    -webkit-transform: scale(" + ratioScale + ");" + 
                            "    -webkit-transform-origin: 0 0;" +
                            "	width: 1024px;" + 
                            "	height: 786px;" + 
                            "	border: none;");
                    var height = iframe.offsetHeight * ratioScale + 20;
                    /* console.log("width "+ width +" height "+ height); */
                    var width = iframe.offsetWidth * ratioScale;
                    newParentIframe.style.width = width +"px";
                    newParentIframe.style.height = height +"px";
                    newParentIframe.style.overflow = "hidden";
                    
                }
                if(checkIframeVideo(src)){
                    iframe.style.pointerEvents = 'none';
                    iframe.parentElement.onclick = function(){
                        if(typeof showVideoStreamWithData !== 'function'){
                            return;
                        }
                        var videoScenario = {};
                        videoScenario.videoId = getVideoIdFromUrl(src);
                        videoScenario.courseId = 5873171332857856;
                        videoScenario.topicId = 6143894756524032;
                        videoScenario.videoUrl = src;
                        videoScenario.endTime = new Date().getTime();
                        showVideoStreamWithData(videoScenario);
                    }
                    /* importJsUrls('/loxolivestream/loxolivestream.nocache.js'); */
                }
            }
            function getVideoIdFromUrl(url) {
                if(url.endsWith(".m3u8")){
                    return url;
                }
                var pathname = new URL(url).pathname;
                return pathname.substring(pathname.lastIndexOf('/') + 1);
            }
            
            
            
                        
                            
                                
                                
            
            
            
            
            
            
            .video-item {
                width: 100%;
                border: 1px solid #ddd;
                margin-bottom: 10px;
            }
            .video-item .display-flex {
            padding: 10px;
            }
            .video-item:nth-child(even) {
            margin-left: 5px;
            }
            .video-item:nth-child(odd) {
            margin-right: 5px;
            }
            #videos-live-stream-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            border-bottom: 1px solid #ddd;
            }
            .video-item .avatar {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            right: 0;
            }
            .parent-avatar-panel {
            position: relative;
            height: 0;
            padding-bottom: 62%;
            }
            .parent-avatar-panel.spining {
            overflow: hidden;
            }
            .parent-avatar-panel:before {
            content: "\f144";
            font-family: "Font Awesome 5 Pro";
            font-weight: 900;
            -moz-osx-font-smoothing: grayscale;
            -webkit-font-smoothing: antialiased;
            font-style: normal;
            font-variant: normal;
            text-rendering: auto;
            line-height: 1;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            text-align: center;
            font-size: 5em;
            display: flex;
            cursor: pointer;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 2;
            cursor: pointer;
            }
            .parent-avatar-panel.spining:before {
            content: "\f110";
            -webkit-animation: fa-spin 2s infinite linear;
            animation: fa-spin 2s infinite linear;
            color: white;
            font-weight: 300;
            }
            .parent-avatar-panel:AFTER {
            content: "";
            width: 100%;
            height: 100%;
            position: absolute;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
            }
            .parent-avatar-panel:hover:AFTER {
            background-color: rgba(0, 0, 0, 0.3);
            }
            .video-item .time {
            font-size: 0.9em;
            }
            @media (max-width: 1000px) {
                .video-item {
                width: 100%;
                margin-left: 0 !important;
                margin-right: 0 !important;
                }
            }
            
            
            
            
            function onLoadedVideosPanel() {
                $('.video-item .parent-avatar-panel').removeClass('spining');
                $('#videos-live-stream-content').find('.video-item .parent-avatar-panel').removeClass('spining');
            }
            jQuery(document).ready(function ($) {
                const VIDEO_TYPE_LIVE_STREAM = 1;
            // 	const VIDEO_TYPE_READING = 2;
            
                POST('/api/get-videos-in-lesson', { topicId: 6143894756524032 }, function(data){
            // 		console.log('videos', data);
                    var mainPanel = $('#videos-live-stream-content');
                    if(data && data.hasData && data[VIDEO_TYPE_LIVE_STREAM].length > 0){
                        if(data[VIDEO_TYPE_LIVE_STREAM].length > 0){
                            data[VIDEO_TYPE_LIVE_STREAM].forEach(function(video) {
                                mainPanel.append(renderVideoItem(video, VIDEO_TYPE_LIVE_STREAM));
                            });
                        }
            // 			if(data[VIDEO_TYPE_READING].length > 0){
            // 				data[VIDEO_TYPE_READING].forEach(function(video) {
            // 					mainPanel.append(renderVideoItem(video, VIDEO_TYPE_READING));
            // 				});
            // 			}
                        
                        if(true){
                            var urlCNDLib = 'https://cdn.jwplayer.com/libraries/pXaOZJzQ.js'; 
                            importJsUrls('/loxolivestream/loxolivestream.nocache.js?v=5.968', 
                                /* 	'/resources/js/video/video.js',
                                    '/resources/js/video/VideoPlayer.js',
                                    '/resources/js/video/videojs.cuepoints.js',
                                    '/resources/js/video/videojs-http-streaming.js', */
                                    
                                    urlCNDLib
                                    );
                        }
                    } else {
                        checkEmptyParentBlock(mainPanel, 'main-block-panel', 'videos-live-stream-empty');
                    }
                });
                
                var TEMP_VIDEO_ITEM = '<div class="video-item">';
                        TEMP_VIDEO_ITEM += '<div class="parent-avatar-panel"><img class="avatar"></div>';
                        TEMP_VIDEO_ITEM += '<div class="display-flex" style="justify-content: space-between;align-items: flex-start;">';
                            TEMP_VIDEO_ITEM += '<div class="info-left">';
                                TEMP_VIDEO_ITEM += '<div><strong class="title"></strong></div>';
                                TEMP_VIDEO_ITEM += '<div><i class="time"></i></div>';
                                TEMP_VIDEO_ITEM += '<div class="description dot-4"></div>';
                            TEMP_VIDEO_ITEM += '</div>';
                            TEMP_VIDEO_ITEM += '<div class="info-right">';
                                TEMP_VIDEO_ITEM += '<div class="icon-lv"><img width="68px" src="/resources/images/icon-livestream.gif"></div>';
                            TEMP_VIDEO_ITEM += '</div>';
                        TEMP_VIDEO_ITEM += '</div>';
                    TEMP_VIDEO_ITEM += '</div>';
                
                function renderVideoItem(video, type) {
                    console.log('render video');
                    /*var videoItemPanel;
                     if(video.videoUrl.indexOf('app.onestream.live')){
                        var height = window.innerWidth * 9/16;
                        if(height == 0){
                            height = 350;
                        }
                        if(height > 450){
                            height = 450;
                        }
                        var new_live = '<div class="video-item" style ="width:100% !important">';
                        new_live += '<iframe allow="autoplay" allowfullscreen="" frameborder="0" height="' + height + '" scrolling="no" src="' + video.videoUrl + '" style="overflow: hidden;" width="100%"></iframe>'; 
                        new_live += '</div>';
                        return $(new_live);
                    } else { */
                        var videoItemPanel = $(TEMP_VIDEO_ITEM);
                        var avatar = videoItemPanel.find('.avatar');
                        if(video.videoUrl.indexOf("youtube") > -1) {
                            avatar.attr('src', getThumbnailYoutubeById(video.videoId));
                        } else if(video.videoUrl.indexOf("facebook") > -1) {
                            avatar.attr('src', getThumbnailFacebookById(video.videoId));
                        } else if(video.videoUrl.indexOf("vimeo") > -1){
                            if(video.thumbnail){
                                avatar.attr('src', video.thumbnail);
                            } else {
                                getThumbnailVimeoById(video.videoUrl, function(url){
                                    if(url){
                                        avatar.attr('src', url);
                                        $.post('/api/update-thumbnail-video-on-vimeo', { videoId: video.id, url: url });
                                    }
                                });
                            }
                        } else if(video.videoUrl.indexOf('.m3u8') > -1){
                            var url = 'https://storage.googleapis.com/comaiphuong-edu-media/images/images_default_videojs.jpg';
                            avatar.attr('src', url);
                        } else if(video.videoUrl.indexOf('app.onestream.live') > -1) {
                            console.log('xxxxx');
                            var url = 'https://storage.googleapis.com/comaiphuong-edu-media/images/images_default_videojs.jpg';
                            if(false){
                                url = "https://storage.googleapis.com/comaiphuong-edu-media/images/nenchen-1.png";
                            }
                            console.log('url', url);
                            avatar.attr('src', url);
                        } else {
                            avatar.attr('src', getThumbnailYoutubeById(""));
                        }
                        videoItemPanel.find('.title').text(video.title);
                        videoItemPanel.find('.time').text(formatDate(video.startTime, true));
                        videoItemPanel.find('.description').text(video.description);
                         if(video.statusVideo == 0){//0:video_normal
                             videoItemPanel.find('.icon-lv').remove();
                         }
                        videoItemPanel.find('.parent-avatar-panel').addClass('spining');
                        videoItemPanel.click(function(){
                            if(typeof showVideoStreamWithData === 'function'){
                                showVideoStreamWithData(video);
                            }
                        });
                    /* } */
                    return videoItemPanel;
                }
            });
            
                                
            
            
            
            
            
            
            
            
            
            
            
            
            /* topic tree */
            .topic-item-panel {
            display: flex;
            }
            .topic-item {
            }
            .topic-item-left-panel{
            width: 30px;
            background: white;
            display:flex;
            align-items:center;
            position: relative;
            }
            .topic-item-num{
            border: 1px solid var(--root-text-menu-color);
            background-color: white;
            color: var(--root-text-menu-color);
            width: 30px;
            height: 30px;
            border-radius: 100%;
            position: absolute; 
            display:flex; 
            align-items:center; 
            justify-content:center;
            line-height: 1;
            }
            .topic-item-refer-style {
                position: absolute;
                left: 50%;
                transform: translate(-50%, 0px);
                font-size: xx-small !important; 
                bottom: 10px;
                margin-left: 0px !important;
            }
            .topic-item.topic-item-title {
            font-weight: bold;
            }
            .topic-item .topic-item-content {
            display: flex;
            align-items: center;
            position: relative;
            }
            .topic-item .topic-item-collapse {
            width: 40px;
            text-align: center;
            }
            .topic-item .topic-item-collapse[aria-expanded="true"] i:BEFORE {
            content: "\f103"
            }
            .topic-item .topic-item-name {
            width: 100%;
            cursor: pointer;
            color: #337ab7;
            }
            .row-info-panel {
            width:100%;
            }
            .topic-item .topic-item-release-date {
            font-size: 12px;
            color: red;
            }
            .topic-progress-circle-point {
            display: flex;
            align-items: center;
            justify-content: center;
            }
            /* topic tree */
            .topic-item-img-background img{
            width:30px;
            margin-right: 30px;
            }
            .topic-item .topic-item-content  a{
            color: #333;
            text-decoration: none;
            }
            .topic-item .topic-item-content .name-panel {
            padding: 10px 0;
            }
            .topic-item .topic-item-content a:HOVER {
            color: var(--root-text-menu-color);
            }
            .topic-item-left-panel:before {
            content: "";
            position: absolute;
            width: 1px;
            height: 100%;
            background: var(--root-text-menu-color);
            left: 50%;
            }
            .topic-item-free-style {
            background-color: red;
            color: white;
            border: none;
            border-radius: 3px;
            font-weight: 500;
            text-align: center;
            z-index: 1;
            font-size: 10px;
            padding: 0 4px;
            margin-top: 45px;
            margin-left: -3px;
            }
            .topic-item-panel .row-info-panel {
            width: calc(100% - 25px);
            margin-left: auto;
            }
            .topic-item-panel > .topic-item-left-panel {
            align-items: center;
            }
            .topic-item-course-topic {
                background: #eee;
                border-radius: 10px 10px 0px 0px;
            }
            /* .topic-item-panel.active > .topic-item-left-panel { */
            /* align-items: flex-start; */
            /* } */
            /* .topic-item-panel.active > .topic-item-left-panel > .topic-item-num { */
            /* margin-top: 15px; */
            /* } */
            .topic-item-panel[data-loaded="true"] .row-info-panel {
            border: none;
            }
            .topic-item > .topic-item-content.on-hover svg .icon {
            fill: var(--root-color);
            }
            .topic-item > .topic-item-content.on-hover .checked-icon { 
            color: var(--root-color);
            }
            .topic-item > .topic-item-content.on-hover:HOVER svg .icon {
            fill: var(--root-color-bold);
            }
            .topic-item > .topic-item-content.on-hover:HOVER .checked-icon {
            color: var(--root-color-bold);
            }
            .topic-item > .topic-item-content.on-hover:HOVER{
            background: #eeeeee;
            }
            .topic-item .topic-detail-content {
            display: -webkit-box;
            display: -moz-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            flex-direction: column;
            }
            .topic-item .topic-detail-content-title {	
                font-size: medium;
                font-weight: bold;
            }
            .topic-item .topic-detail-content:AFTER {
            content: attr(data-content);
            font-size: 0.9em;
            color: #777;
            }
            .topic-item-free-style {
                cursor: pointer;
                width: 70px;
                bottom: 0;
            }
            .lock-panel {
            position: absolute;
            right: 5px;
            bottom: 5px;
            font-size: 18px;
            }
            #topic-tree-center-content > .topic-item-panel > .topic-item {
            padding: 10px;
            }
            #topic-tree-center-content > .topic-item-panel > .topic-item > .box-content {
            box-shadow: 0 0 5px 0 #aaa;
            border-radius: 10px;
            }
            #topic-tree-center-content > .topic-item-panel > .topic-item.topic-item-title > .box-content {
            box-shadow: none;
            border-radius: none;
            }
            #topic-tree-center-content > .topic-item-panel.active > .topic-item > .box-content {
            background: #fafafa;
            }
            .topic-item .name-panel {
            width: calc(100% - 120px);
            }
            #topic-tree-center-content .topic-item-panel.active .topic-item-num {
            background: var(--root-text-menu-color);
            color: white
            }
            .topic-item .topic-item-progress {
            width: 120px;
            text-align: center;
            }
            .topic-item-collapse-content-panel {
                margin-left: 25px;
            }
            .topic-item-collapse-content-panel > .topic-item-panel > .topic-item {
                border-top: 1px solid #ddd;
            }
            @media (max-width: 768px) {
                .lock-panel {
                font-size: 14px;
                }
                .topic-item .topic-item-name {
                width: 100%
                }
                .topic-item-free-style {
                    padding: 2px 5px
                }
                .topic-item-free-style-none {
                    padding: 0 !important;
                }
                .course-content-panel .tab-content .tab-pane {
                padding: 10px;
                }
                .topic-item .topic-item-collapse {
                text-align: center;
                }
                .topic-item-panel .row-info-panel {
                width: calc(100% - 20px);
                }
                .topic-item .name-panel {
                width: calc(100% - 60px);
                }
                .topic-item .topic-item-progress {
                width: 60px;
                }
            }
            .icon-passed,
            .icon-un-passed {
            z-index: 1;
            right: -5px;
            margin-top: -12px;
            position: absolute;
            color: white;
            background: var(--root-color);
            border-radius: 100%;
            width: 15px;
            height: 15px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            }
            .icon-un-passed {
            background: red;
            }
            div#page-panel {
                    display: flex;
                    align-items: center;
                    justify-content: flex-end;
                    flex-wrap: wrap;
                }
                
                div#page-panel button {
                    margin: 3px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 3px;
                    padding: 3px;
                    width: 30px;
                    height: 30px;
                }
                
                div#page-panel button.active {
                    background: #aaa;
                    color: white;
                }
                .showCheck{
                    position: absolute;
                    width: 40px;
                    right: 0;
                    top: 0;
                }
                .iconNew{
                    width: 100%;
                }
            
            
                
            
            
                
                
                    
                        
                            
                            
                        
                    
                
                
                
                
                    
                        
                            
                            
                        
                    
                
                
                
                
                    
                        
                    
                    
                        
                            
                            
                            
                                
                                    
                                
                                
                                
                            
                            
                            
                            
                        
                    
                
                
                
                    
                        
                        Shape
                        Created with Sketch.
                        
                            
                        
                    
                
            
            
            
            jQuery(document).ready(function ($) {
                const ids = [];
                const parentId = 6143894756524032;
                const courseId = 5873171332857856;
                const TOPIC_TYPE_LESSON = 1;
                const TOPIC_TYPE_EXCIRSE = 2;
                const TOPIC_TYPE_TEST = 3;
                const STATUS_OPEN = 4;
                const STATUS_REFER = 6;
                const userId = 'cpthao6789';
                const iconLesson = $('#lesson-icon-svg').html();
                const iconTest = $('#test-icon-svg').html();
                const iconExercise = $('#exercise-icon-svg').html();
                const iconVideo = $('#video-icon-svg').html();
                const limitPage = 15;
                
                const lockPermission = false;
                const pageNum = 18;
                
                var panel = $('#topic-tree-center-content');
                panel.empty();
                panel.append($(getLoadingHtml('var(--root-color)')));
                
                loadData(0);
                function loadData(offset){
                    //var courseId = '4643640737529856';
                    //https://new-dot-comaiphuong-edu.appspot.com
                    if(courseId == parentId) {
                        POST('/api/get-childs-topics', { courseId: courseId, offset: offset, userId: userId }, function(data){
                            if(data && data.length > 0){
                                panel.empty();
                                showData(data, panel, false, true, offset);
                                //$('#number-lesson-element').html(data ? data.length : 0);
                            } else {
                                checkEmptyParentBlock(panel, 'main-block-panel', 'topic-tree-empty');
                            }	
                            /* showPaging(offset); */
                            //$('#number-lesson-element').html(data ? data.length : 0);
                        }); 
                        /* POST('/api/get-topic-child-by-ids', { courseId: courseId, parentId: parentId, ids: ids, userId: userId }, function(data){
                            if(data && data.length > 0){
                                panel.empty();
                                showData(data, panel, false, courseId == parentId);
                                $('#number-lesson-element').html(data ? data.length : 0);
                            } else {
                                checkEmptyParentBlock(panel, 'main-block-panel', 'topic-tree-empty');
                            }	
                        }); */
                    } else {
                        POST('/api/get-topic-child-by-ids', { courseId: courseId, parentId: parentId, ids: ids, userId: userId }, function(data){
                            if(data && data.length > 0){
                                panel.empty();
                                showData(data, panel, true, true, 0);
                            } else {
                                checkEmptyParentBlock(panel, 'main-block-panel', 'topic-tree-empty');
                            }
                        });
                    }
                } 
                
                function showPaging(offset) {
                    panel.append('<div id="page-panel"></div>');
                    var pagePanel = $('#page-panel');
                    let page = parseInt(pageNum / limitPage) + (pageNum % limitPage > 0 ? 1 : 0);
                    for(let i = 0; i < page; i ++){
                        let itemPanel = document.createElement('button');
                        if(i == offset){
                            itemPanel.classList.add('active');
                        }
                        itemPanel.innerHTML = (i + 1);
                        pagePanel.append(itemPanel);
                        itemPanel.onclick = function () {
                            pagePanel.find('button').removeClass('active');
                            itemPanel.classList.add('active');
                            loadData(i);
                        }
                    }
                }
                
                function showData(data, topicsPanel, isTopicChild, checkUnlock, offset){
                    topicsPanel.empty();
                    if(!isTopicChild){
                        var titleItem = renderTopicItem(null, null, false, false, false, 0);
                        topicsPanel.append($(titleItem));
                    }
                    var isOpenChild = true;
                    data.forEach(function(topic, index){
                        var hashChild = isOpenChild && topic.childrentIds && topic.childrentIds.length > 0 && topic.childrentType == 1;
                        var item = $(renderTopicItem(topic, hashChild , false , index, isTopicChild, offset * limitPage));
                        topicsPanel.append(item);
                        var topicQualityChild = '';
                        if(topic.totalVideo > 0){
                            topicQualityChild += topic.totalVideo + ' Bài giảng';
                        }
                        if(topic.documentIds && topic.documentIds.length > 0){
                            if(topic.totalDocAudio > 0){
                                topicQualityChild += ' / ' + topic.totalDocAudio + ' audio';
                            }
                            var totalDoc = topic.documentIds.length - topic.totalDocAudio;
                            if(totalDoc > 0){
                                topicQualityChild += ' / ' + topic.documentIds.length + ' Tài liệu';
                            }
                        }
                        if(topic.totalExercise > 0){
                            topicQualityChild += ' / ' + topic.totalExercise + ' Bài tập';		
                        }
                        if(topic.totalTest > 0){
                            topicQualityChild += ' / ' + topic.totalTest + ' Bài thi Online';
                        }
                        if(topic.childrentType == 2){
                            var questionNum = 0;
                            if(topic.type == 2){
                                questionNum = topic.childrentIds.length;
                            }
                            if(topic.type == 3){
                                questionNum = topic.questionNumber;
                            }
                            if(questionNum > 0){
                                topicQualityChild += ' / ' + questionNum + ' Câu hỏi';
                            }
                        }
                        if(topic.type == TOPIC_TYPE_LESSON && !topicQualityChild){
                            topicQualityChild = (topic.childrentIds.length == 0 ? 1 : topic.childrentIds.length) + " bài";
                        }
                        if(topic.shortDescription && topic.shortDescription.length > 0) {
                            item.find('.topic-detail-content').attr('data-content', topic.shortDescription);
                        } else if(topicQualityChild){
                            topicQualityChild = topicQualityChild.startsWith(' / ') ? topicQualityChild.replace(' / ', '') : topicQualityChild;
                            item.find('.topic-detail-content').attr('data-content', topicQualityChild);
                        }
                        // TODO: test
                        let checkLockPermission = lockPermission && checkUnlock == true;
                        topic.unlock = topic.unlock || hasPermission();
                        if(topic.unlock == false && checkLockPermission){
                            item.find('.topic-item-content').append($('<div class="lock-panel"><i class="fad fa-lock-alt"></i></div>'));
                        }
                        if(hashChild && (topic.unlock == true && checkLockPermission || !checkLockPermission || 0 == 1)){
                            item.find('.topic-item-collapse').click(function(){
                                loadTopicChild(item, topic);
                            });
                        }
                        /* if(topic.childrentTopics && topic.childrentTopics.length > 0){
                            var mainPanel = $('#collapse-topic-item-' + topic.id);
                            mainPanel.empty();
                            console.log('show Data 1');
                            showData(topic.childrentTopics, mainPanel, true, false, 0);
                        } */
                        if(0 == 1 && 0 == 1){
                            item.find('.topic-detail-content, .topic-item-free-style').click(function(){
                                if(topic.childrentTopics && topic.childrentTopics.length > 0){
                                    return;
                                }
                                if(topic && ((topic.status == STATUS_OPEN || topic.status == STATUS_REFER) && topic.unlock == true && 0 == 1 || 0 == 0 && topic.status == STATUS_OPEN)){
                                    window.location.href=getLinkTopic(topic.name, topic.id);
                                    return false;
                                }
                                var status = hasPermissionClickTopic(topic.courseId, -1);
                                if(status.status == 3){
                                    if(status.type == 1){
                                            if(topic.leftmenuIndex < status.unitsStudy){
                                                window.location.href=getLinkTopic(topic.name, topic.id);
                                            } else {
            //		 							showInfo("Bạn chỉ được học thử " + status.unitsStudy + " bài đầu");
                                                showToasterInfo("Bạn chỉ được học thử " + status.unitsStudy + " bài đầu");
                                                var c = { 
                                                    id: 5873171332857856, 
                                                free: false, 
                                                timeExpire: 0, 
                                                areaId: -1,
            //		 								msg: "Bạn chỉ được học thử " + status.unitsStudy + " bài đầu"
                                                };
                                                onJoinCourse(".btn-join-course-style", c);
                                            }
                                        } else {
                                            if(!hasPermission()) {
                                                if(topic.unlock == false && checkLockPermission) {
                                                    showInfo("Bài học đang bị khoá! Hãy hoàn thành các bài học trước để mở khoá!");
                                                    return;
                                                }
                                                if(topic.startTimePerUser > 0){
                                                    if(currentTime < topic.startTimePerUser) {
                                                        showInfo("Khoá học chưa phát hành. Phát hành vào "+formatDate(topic.startTimePerUser, true, false)+" !");
                                                        return;
                                                    }
                                                } else if(topic.startTime > 0) {
                                                    if(currentTime < topic.startTime) {
                                                        showInfo("Khoá học chưa phát hành. Phát hành vào "+formatDate(topic.startTime, true, false)+" !");
                                                        return;
                                                    }
                                                }
                                            }
                                            window.location.href=getLinkTopic(topic.name, topic.id);
                                        }
                                    } else if(hashChild){
                                        loadTopicChild(item, topic);
                                    } else {
                                        onJoinCourse(".btn-join-course-style", { id: 5873171332857856, free: false, timeExpire: 0, areaId: -1 });
                                    }
                            });
                        } else {
                            item.find('.topic-detail-content, .topic-item-free-style').click(function(){
                                if(topic && ((topic.status == STATUS_OPEN || topic.status == STATUS_REFER) && topic.unlock == true && 0 == 1 || 0 == 0 && topic.status == STATUS_OPEN)){
                                    window.location.href=getLinkTopic(topic.name, topic.id);
                                    return false;
                                }
                                var status = hasPermissionClickTopic(topic.courseId, -1);
                                if(status.status == 3){
                                    if(status.type == 1){
                                            if(topic.leftmenuIndex < status.unitsStudy){
                                                window.location.href=getLinkTopic(topic.name, topic.id);
                                            } else {
            //		 							showInfo("Bạn chỉ được học thử " + status.unitsStudy + " bài đầu");
                                                showToasterInfo("Bạn chỉ được học thử " + status.unitsStudy + " bài đầu");
                                                var c = { 
                                                    id: 5873171332857856, 
                                                free: false, 
                                                timeExpire: 0, 
                                                areaId: -1,
            //		 								msg: "Bạn chỉ được học thử " + status.unitsStudy + " bài đầu"
                                                };
                                                onJoinCourse(".btn-join-course-style", c);
                                            }
                                        } else {
                                            if(!hasPermission()) {
                                                if(topic.unlock == false && checkLockPermission) {
                                                    showInfo("Bài học đang bị khoá! Hãy hoàn thành các bài học trước để mở khoá!");
                                                    return;
                                                }
                                                if(topic.startTimePerUser > 0){
                                                    if(currentTime < topic.startTimePerUser) {
                                                        showInfo("Khoá học chưa phát hành. Phát hành vào "+formatDate(topic.startTimePerUser, true, false)+" !");
                                                        return;
                                                    }
                                                } else if(topic.startTime > 0) {
                                                    if(currentTime < topic.startTime) {
                                                        showInfo("Khoá học chưa phát hành. Phát hành vào "+formatDate(topic.startTime, true, false)+" !");
                                                        return;
                                                    }
                                                }
                                            }
                                            window.location.href=getLinkTopic(topic.name, topic.id);
                                        }
                                    } else if(hashChild){
                                        loadTopicChild(item, topic);
                                    } else {
                                        onJoinCourse(".btn-join-course-style", { id: 5873171332857856, free: false, timeExpire: 0, areaId: -1 });
                                    }
                            });
                        }
                        if(!isTopicChild && false){
                            if(index == data.length - 1){
                                $('.topic-item-collapse').click();
                            }
                        }
                    });
                    const color = "#00aa0c";
                    $.each($('.topic-progress-circle-point'), function(index, elem){
                        if($(elem).has('span').length == 0){
                            circleProgress(elem, 0.7, color, color, "#ddd", false, 30, 2);
                        }
                    });
                }
                
                function loadTopicChild(rootPanel, topic) {
                    if(rootPanel.attr('data-loaded') === true || rootPanel.attr('data-loaded') === 'true'){
                        return;
                    }
                    var mainPanel = $('#collapse-topic-item-' + topic.id);
                    mainPanel.empty();
                    mainPanel.append($(getLoadingHtml('var(--root-color)', 0.5)));
                    if(topic.childrentTopics && topic.childrentTopics.length > 0){
                        showData(topic.childrentTopics, mainPanel, true, true, 0);
                    } else {
                        POST('/api/get-topic-child-by-ids', { courseId: topic.courseId, parentId: topic.id, ids: topic.childrentIds, userId: userId }, function(data){
                            rootPanel.attr('data-loaded', true);
                            if(data && data.length > 0){
                                showData(data, mainPanel, true, true, 0);
                            } else {
                                mainPanel.empty();
                                var panel = rootPanel.find('.topic-item-collapse');
                                if(topic.type == TOPIC_TYPE_LESSON){
                                    if(topic.totalVideo > 0 || checkVideo(topic)){
                                        panel.html(iconVideo);
                                    } else {
                                        panel.html(iconLesson);
                                    }
                                    
                                } else if(topic.type == TOPIC_TYPE_EXCIRSE) {
                                    panel.html(iconExercise);
                                }  else if(topic.type == TOPIC_TYPE_TEST) {
                                    panel.html(iconTest);
                                }
                            }
                        });
                    }
                    mainPanel.on("show.bs.collapse", function(){
            // 			console.log('show child', topic.id, topic.name);
                        rootPanel.addClass('active');
                    });
                    mainPanel.on("hide.bs.collapse", function(){
            // 			console.log('hide child', topic.id, topic.name);
                        rootPanel.removeClass('active');
                    });
                }
                
                function renderTopicItem(topic, expand, targetBlank, i, isTopicChild, offset) {
                    i = i + 1;
                    var html = "<div class='topic-item-panel'>";
                        /* if(!isTopicChild){ */
                            if(topic && (!false || isTopicChild)){
                                html += "<div class='topic-item-left-panel'>";
                                    if(topic.examScore){
                                        if(topic.examScore.totalScore >= topic.pass){
                                            html += '<div class="icon-passed" title="Đã qua" data-toggle="tooltip"><i class="far fa-check"></i></div>';
                                        } else {
                                            html += '<div class="icon-un-passed" title="Chưa qua" data-toggle="tooltip"><i class="far fa-times"></i></div>';
                                        }
                                    }
                                    html +="<div class='topic-item-num' ><span>"+(i + offset < 10 ? "0" : "")+""+(i + offset ) +"</span></div>";
                                    if(topic.status == STATUS_OPEN){
                                        
                                        html += "<div class='topic-item-free-style'>FREE</div>";
                                        
                                    } else if(topic.tag !== null && topic.tag !== undefined){
                                        html += "<div class='topic-item-free-style topic-item-free-style-none topic-item-refer-style'>"+ topic.tag +"</div>";
                                    }
                                    /* if(topic.status == STATUS_REFER){
                                        html += "<div class='topic-item-free-style topic-item-refer-style'></div>";
                                    } */
                                    
                                html += "</div>";
                            } else{
                                html += "<div style='width:25px'></div>";
                            }
                        /* } */
                        var clName = "topic-item-content";
                        if(topic && false && topic.childrentTopics && topic.childrentTopics.length > 0){
                            clName = "topic-item-content topic-item-course-topic";
                        }
                        html += "<div class='topic-item "+(!topic ? "topic-item-title" : "") + " row-info-panel'><div class='box-content'><div class='" + clName + " " + (!topic ? "" : "on-hover")+"'>";
                            if(topic) {
                                if(expand){
                                    if(topic.type == TOPIC_TYPE_LESSON && (topic.totalVideo > 0 || checkVideo(topic))){
                                            html += "<a class='topic-item-collapse'>"+iconVideo+"</a>";
                                    } else
                                        html += "<a data-toggle='collapse' data-target='#collapse-topic-item-"+topic.id+"' class='topic-item-collapse'><i class='fa fa-angle-double-right'></i></a>";
                                } else {
                                    if(topic.type == TOPIC_TYPE_LESSON){
                                        if(topic.totalVideo > 0 || checkVideo(topic)){
                                            html += "<a class='topic-item-collapse'>"+iconVideo+"</a>";
                                        } else {
                                            html += "<a class='topic-item-collapse'>"+iconLesson+"</a>";
                                        }
                                    } else if(topic.type == TOPIC_TYPE_EXCIRSE) {
                                        html += "<a class='topic-item-collapse'>"+iconExercise+"</a>";
                                    }else if(topic.type == TOPIC_TYPE_TEST) {
                                        html += "<a class='topic-item-collapse'>"+iconTest+"</a>";
                                    }
                                }
                            } else {
                                html += "<a class='topic-item-collapse'></a>";
                            }
                            var url = "";
                            
                            if(topic){
                                let startTime_ = topic.startTime
                                let limitDate = (14 * (24 * 60 * 60) * 1000)
                                let checkLimitDate =  startTime_ + limitDate;
                                let showCheckLimitDate;
                                if(Date.now() < checkLimitDate && Date.now() > startTime_ && !(false && topic.childrentTopics && topic.childrentTopics.length > 0)){
                                    showCheckLimitDate = "<img class='iconNew' src='/resources/images/newLession.png'/>"
                                }else{
                                    showCheckLimitDate = ""
                                }
                                html += "<div data-toggle='collapse' data-target='#collapse-topic-item-"+topic.id+"' class='name-panel'>";
                                html += "<div class='showCheck'>"+showCheckLimitDate+"</div>"
                                
                                if((topic.status == STATUS_OPEN || topic.status == STATUS_REFER) && topic.unlock == true){
                                    html += "<a "+(targetBlank?"target='_blank' " : "")+"href='"+url+"' class='topic-detail-content dot-1' title='"+topic.name+"'>" + topic.name + "</a>";
                                } else{
                                    if(topic && false && topic.childrentTopics && topic.childrentTopics.length > 0){
                                        html += "<a "+(targetBlank?"target='_blank' " : "")+" class='topic-detail-content topic-detail-content-title topic-item-name dot-1' title='"+topic.name+"'>" + topic.name + "</a>";
                                    } else {
                                        html += "<a "+(targetBlank?"target='_blank' " : "")+" class='topic-detail-content topic-item-name dot-1' title='"+topic.name+"'>" + topic.name + "</a>";
                                    }
                                }
                                var dateContent = '';
                                if(topic){
                                    if(topic.startTimePerUser > 0){
                                        if(currentTime > topic.startTimePerUser) {
            // 								dateContent = '<span class="checked-icon"><i class="far fa-check"></i></span>';
                                        } else {
                                            dateContent = "<span>" + formatDate(topic.startTimePerUser, true, false) + "</span>";
                                        }
                                    } else if(topic.startTime > 0) {
                                        if(currentTime > topic.startTime) {
            // 								dateContent = '<span class="checked-icon"><i class="far fa-check"></i></span>';
                                        } else {
                                            dateContent = "<span>" + formatDate(topic.startTime, true, false) + "</span>";
                                        }
                                    } 
                                }
                                if(dateContent){
                                    html += "<div class='topic-item-release-date'>Phát hành: " + dateContent + "</div>";
                                }
                                html += '</div>';
                            } else {
                                html += "<div class='topic-item-name' style='color: #333; font-size: 13px'>Tên bài học</div>";
                            }
                            var topicP = "";
                            var p = 0;
                            if(topic){
                                p = (topic.progress ? topic.progress.progress : null);
                                if(p == 100){
                                    topicP += "<span class='check-circle-success'><img src='/resources/images/check-01-icon.png' style='width: 20px'></span>";
                                } else if(p == null){
                                    if(topic.childrentTopics && topic.childrentTopics.length > 0){
                                        
                                    } else {
                                        topicP += "-";
                                    }
                                } else if(topic.type == TOPIC_TYPE_TEST) {
                                    if(topic.examScore){
                                        var score = 0;
                                        if(topic.examScore.examScore > 0){
                                            score = topic.examScore.examScore;
                                        } else {
                                            score = topic.examScore.totalScore;
                                        }
                                        topicP += "<span class='check-circle-success'>"+score+" Điểm</span>";
                                    } else {
                                        topicP += "<span class='check-circle-success' style='font-size:12px'>-</span>";
                                    }
                                } else if(topic.type == TOPIC_TYPE_LESSON) {
                                    if(p == null){
                                        topicP += "-";
                                    } else if( !false || false && isTopicChild){
                                        topicP += "<span class='check-circle-success'><img src='/resources/images/check-01-icon.png' style='width: 20px'></span>";
                                    }
                                } else {
                                    topicP = "<div id='topic-progress-id-"+topic.id+"' class='topic-progress-circle-point' data-progress='"+p+"'></div>";
                                }
                            }
                            html += "<div class='topic-item-progress' " + (topic ? "style=''" : "style='color: #333; font-size: 13px'") + ">" + (topic ? topicP : "Tiến độ học") + "</div>";
                        html += "</div>";
                        if(topic && expand){
                            html += "<div id='collapse-topic-item-"+topic.id+"' class='topic-item-collapse-content-panel collapse'></div>";
                        }
                        html += "</div>";
                        html += "</div></div>";
                    return html;
                }
                
                function checkVideo(topic){
                    var des = topic.description;
                    var check = des && (des.includes("https://www.youtube.com/embed") || des.includes("https://www.youtube.com/embed") || des.includes(".m3u8") || des.includes(".mp4"));
                    return check;
                }
            });
            
                            
                        
                        
            
            
            
            
            
            
            
            
            
            
                        
                        
            
            
            
            
            
                
                    
            
            
            
            
            
            
            
            
            
                  
                ×
                
                
                
                    
                
                
            
            
                
                    0%
                 
            
            
             Cancel
            
             
                   
                ×
                
                
                
                    
                
                
            
            
                
                    0%
                 
            
            
             Cancel
            
             
               Xem thêm bình luận...
            
                
            
            
                    
                    
                        
                        
            
            
            
            
            
            
            
            
            .topic-tree-panel {
            border: 1px solid #ddd;
            background-color: white;
            }
            .topic-tree-panel .come-back-panel {
            background: #333;
            color: white;
            display: flex;
            align-items: center;
            padding: 7px !important;
            }
            .topic-tree-panel .topic-item {
            display: flex;
            align-items: center;
            padding: 10px 10px;
            padding-right: 3px;
            }
            .topic-tree-panel .topic-item i {
            margin-right: 10px;
            }
            .topic-tree-panel .topic-item a {
            color: var(--root-color);
            }
            .topic-tree-panel .topic-item svg .icon {
            fill: var(--root-color);
            }
            .topic-tree-panel .topic-item:HOVER svg .icon, 
            .topic-tree-panel .topic-item.active svg .icon {
            fill: var(--root-color-bold);
            }
            .topic-tree-panel .topic-item a:HOVER, 
            .topic-tree-panel .topic-item:HOVER a,
            .topic-tree-panel .topic-item.active a{
            color: var(--root-text-menu-color);
            /* font-weight: bold; */
            }
            .topic-item.active {
            background-color: #eee;
            }
            .topic-tree-panel .btn-back-url {
            color: white;
            border: 0;
            outline: none;
            width: 25px;
            height: 25px;
            border-radius: 100%;
            margin-right: 7px;
            background-color: var(--root-color);
            }
            #topic-left-tree-panel {
            overflow-y: auto;
            max-height: 400px;
            }
            @media ( max-width : 768px) {
                #topic-left-tree-panel {
                max-height: unset;
                }
            }
            .wrap-icon-svg {
            margin-right: 5px;
            }
            #topic-left-tree-panel .topic-item {
            align-items: flex-start !important;
            }
            #topic-left-tree-panel .topic-item .lock-panel {
            margin-left: auto;
            position: unset;
            }
            #topic-left-tree-panel .topic-item i {
            margin: 0;
            }
            
            
                
            
            
                
                
                    
                        
                            
                            
                        
                    
                
                
                
                
                    
                        
                            
                            
                        
                    
                
                
                
                
                    
                        
                    
                    
                        
                            
                            
                            
                                
                                    
                                
                                
                                
                            
                            
                            
                            
                        
                    
                
                
                
                    
                        
                        Shape
                        Created with Sketch.
                        
                            
                        
                    
                
            
            
                
                
                    
                        
                            
                            
                        
                    
                
                Góp ý, đánh giá và yêu cầu bổ sung khoá học (Riêng tư)
                
                    
                        
                            
                            
                        
                    
                
                Nhóm Zalo VIP dành cho học viên
                
                    
                        
                            
                            
                        
                    
                
                Tóm tắt kiến thức CHƯƠNG 1
                
                    
                        
                            
                            
                        
                    
                
                Tóm tắt kiến thức CHƯƠNG 2
                
                    
                        
                            
                            
                        
                    
                
                Tóm tắt kiến thức CHƯƠNG 3
                
                    
                        
                            
                            
                        
                    
                
                Tóm tắt kiến thức CHƯƠNG 4
                
                    
                        
                            
                            
                        
                    
                
                Tóm tắt kiến thức CHƯƠNG 5
                
                    
                        
                            
                            
                        
                    
                
                Tóm tắt kiến thức CHƯƠNG 6
                
                    
                        
                            
                            
                        
                    
                
                Hướng dẫn trình bày Bài tập lớn
                
                    
                        
                            
                            
                        
                    
                
                ĐỀ SỐ 1
            
            
                jQuery(document).ready(function($) {
                    loadTreeTopicLeftPanel();
                });
                
                function loadTreeTopicLeftPanel() {
                    const courseIdValue = 5873171332857856
                    const topicId = 6143894756524032
                    const parentId = 5873171332857856;
                    const currentTopicId = 6143894756524032;
                    const TOPIC_TYPE_LESSON = 1;
                    const TOPIC_TYPE_EXCIRSE = 2;
                    const TOPIC_TYPE_TEST = 3;
                    const STATUS_OPEN = 4;
                    const STATUS_REFER = 6;
                    const iconLesson = $('#lesson-icon-svg').html();
                    const iconTest = $('#test-icon-svg').html();
                    const iconExercise = $('#exercise-icon-svg').html();
                    const checkLockPermission = false;
                    var topicPanel = $('#topic-left-tree-panel');
                    topicPanel.empty();
                    topicPanel.append(getLoadingHtml());
                    POST('/api/get-relation-topics', { topicId : topicId, courseId: courseIdValue }, function(data) {
                        if (!data || data.length == 0) {
                            topicPanel.parent().remove();
                            return;
                        }
                        var topicItemSelected = null;
                        topicPanel.empty();
                        data.forEach(function(topic, index) {
                            var html = '<div class="topic-item ' + (topic.id == currentTopicId ? 'active' : '') + '">';
                            if (topic.type == TOPIC_TYPE_LESSON) {
                                html += '<span class="wrap-icon-svg">' + iconLesson + '</span>';
                            }
                            if (topic.type == TOPIC_TYPE_EXCIRSE) {
                                html += '<span class="wrap-icon-svg">' + iconExercise + '</span>';
                            }
                            if (topic.type == TOPIC_TYPE_TEST) {
                                html += '<span class="wrap-icon-svg">' + iconTest + '</span>';
                            }
                            html += '<a title="'+topic.name+'">' + topic.name + '</a>';
                            html += '</div>';
                            var item = $(html);
                            if(topic.id == currentTopicId){
                                topicItemSelected = item;
                            }
                            topicPanel.append(item);
                            if(checkLockPermission && topic.unlock == false) {
                                item.append($('<div class="lock-panel"><i class="fad fa-lock-alt"></i></div>'));
                            }
                            item.click(function() {
                                if(topic && ((topic.status == STATUS_OPEN || topic.status == STATUS_REFER) && topic.unlock == true && 0 == 1 || 0 == 0 && topic.status == STATUS_OPEN)){
                                    window.location.href = getLinkTopic(topic.name, topic.id);
                                    return false;
                                }
                                var status = getUserCourseStatusDetails(topic.courseId, -1);
                                if (status.status == 3) {
                                    if (status.type == 1) {
                                        if (topic.leftmenuIndex < status.unitsStudy) {
                                            window.location.href = getLinkTopic( topic.name, topic.id);
                                        } else {
                                            showToasterInfo("Bạn chỉ được học thử " + status.unitsStudy + " bài đầu");
                                            var c = { 
                                                id: 5873171332857856, 
                                                free: false, 
                                                timeExpire: 0, 
                                                areaId: -1,
                                            };
                                            onJoinCourse(".btn-join-course-style", c);
                                        }
                                    } else {
                                        if(!hasPermission()) {
                                            if(checkLockPermission && topic.unlock == false) {
                                                showInfo("Bài học đang bị khoá! Hãy hoàn thành các bài học trước để mở khoá!");
                                                return;
                                            }
                                            if(topic.startTimePerUser > 0){
                                                if(currentTime < topic.startTimePerUser) {
                                                    showInfo("Khoá học chưa phát hành. Phát hành vào "+formatDate(topic.startTimePerUser, true)+" !");
                                                    return;
                                                }
                                            } else if(topic.startTime > 0) {
                                                if(currentTime < topic.startTime) {
                                                    showInfo("Khoá học chưa phát hành. Phát hành vào "+formatDate(topic.startTime, true)+" !");
                                                    return;
                                                }
                                            }
                                        }
                                        window.location.href = getLinkTopic(topic.name, topic.id);
                                    }
                                } else {
                                    var cObj = {
                                        id : 5873171332857856, 
                                        free : false, 
                                        timeExpire : 0,
                                        areaId: -1,
                                    };
                                    onJoinCourse(".btn-join-course-style", cObj);
                                }
                            });
                        });
                        if(topicItemSelected){
                            var top = topicItemSelected.offset().top;
                            if(top > 400){
                                topicPanel.animate({
                                    scrollTop: top
                                }, 'slow');
                            }
                        }
                    });
                }
            
                        
                        
            
            
            
            
            
            
            
            
            .user-info-block-panel .user-info-panel {
            margin-left: 10px;
            font-size: 14px;
            }
            .user-info-block-panel{
            margin-bottom:20px;
            }
            .progress-user-parent-panel {
            width: calc(100% - 70px);
            height: 10px;
            background: #ddd;
            display: inline-block;
            position: relative;
            z-index: 1;
            border-radius: 10px;
            }
            .progress-user-child-panel {
            position: absolute;
            z-index: 2;
            top: 0;
            left: 0;
            height: 100%;
            border-radius: 10px;
            background: #2090FE;
            }
            .item-user-info-block{
            margin-top: 10px;
            }
            .email-info{
            font-style: italic;
            font-weight:normal;
            color:#333;
            font-size: 13px;
            }
            .user-info-panel {
            border: 1px solid #ddd;
            }
            .item-user-info-block {
            align-items: flex-start;
            }
            
            
                
                    
                        
                        
                            Cao Phương Thảo
                            
                            
                            
                                cpthao6789@gmail.com
                            
                            
                        
                    
                    
                        Điểm kinh nghiệm: 3135
                    
            
            
            
                    
                        Bài học gần đây: Tóm tắt kiến thức CHƯƠNG 3
                    
                
            
            
            
            function updateExpJs(exp) {
                var expElement = $('#exp-html-cpthao6789');
                exp > 0 && expElement.html(exp);
            }
            jQuery(document).ready(function ($) {
                var progressElement = $('#progress-user-panel-cpthao6789');
                var examRecentlyElement = $('#exam-recently-panel-cpthao6789');
                
                $.post('/api/get-user-exam-info', { courseId: 5873171332857856, userId: 'cpthao6789' }, function(data){
                    if(data){
                        if(data.recentLessons){
                            examRecentlyElement.empty();
                            var aHTML = '<a href="'+data.recentLessons.url+'"></a>';
                            examRecentlyElement.append($(aHTML).html(data.recentLessons.name));
                            var additionButtonPanel = $('#addition-button-panel');
                            if($(window).width() <= 768){
                                additionButtonPanel.removeClass('large-screen-version');
                            }
                            additionButtonPanel.css('display', 'flex');
                            var aXXX = $(aHTML).attr('data-toggle', 'tooltip').attr('title', data.recentLessons.name).html('Học tiếp');
                            additionButtonPanel.append(aXXX);
                            aXXX.tooltip();
                        } else {
                            examRecentlyElement.parent().remove();
                        }
            
                        if(data.progress){
                            setTopicProgress(data.progress.progress, data.progress.total);
                        } else {
                            progressElement.parent().remove();
                        }
                    }
                });
                function setTopicProgress(p, total) {
                    var progressPanel = $("<div>");
                    progressPanel.addClass('progress-user-child-panel');
                    progressPanel.css('width', (p*100/total)+'%');
                    progressElement.empty();
                    progressElement.append(progressPanel);
                }
            });
            
                        
            
            
            
            
            
            
            
            
            .short-icon-style {
            margin-right: 10px;
            }
            .item-info-utility{
            background-color: #d8d8d8; 
            border-radius: 10px;
            padding:2px; 
            padding-left:8px; 
            padding-right:8px; 
            margin-left: 5px; 
            font-size: 12px
            }
            .course-utility-panel {
            border: 1px solid #ddd;
            }
            
            
                
                    
                        TIỆN ÍCH
                    
                    
                        
                            
                        
                        
                            
                                Tài liệu  0
                            
                        
                    
                    
                        
                            
                        
                        
                            
                                Thành viên  449
                            
                        
                    
                    
                    
                        
                            
                        
                        
                            Hỏi đáp  0
                        
                    
                    
                        
                            
                        
                        
                            Lịch học  0
                        
                    
                    
                        
                            
                        
                        
                            Ghi chú
                        
                    
                
            
            
            $(document).ready( function () {
                POST('/api/count-documents-in-course', { courseId: 5873171332857856 }, function(data){
                    $('#count-documents-element').text(data);
                });
            });
            
                         
                                
            
            
            
            
            
            
            
            
            
            
            
                
                    
                        
                        
                    
                    Trò chuyện trực tuyến
                    
                
                
            
            
            var loadChatFirst = false;
            function openChatPanel(first) {
                var button = document.getElementById('button-chat-main');
                var state = button.getAttribute('data-open');
                var chatPanel = document.getElementById("chat-panel");
                if(state == 'false' || state == false || !!first){
                    chatPanel.style.height = "80%";
                    if(!loadChatFirst){
                        onLoadedChatPanelGWT();
                        loadChatFirst = true;
                    }
                    button.setAttribute('data-open', true);
                    chatPanel.setAttribute('data-open', true);
                } else {
                    chatPanel.style.height = "40px";
                    button.setAttribute('data-open', false);
                    chatPanel.setAttribute('data-open', false);
                }
            }
            function onLoadedChatPanel() {
                document.getElementById('button-chat-main').disabled = false;
                document.getElementById('chat-panel').style.display = 'block';
            }
            
                            
                        
                    
                